(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c5ff01c"],{1960:function(t,e,s){t.exports=s.p+"static/img/icon_sign_empty.71fdc936.png"},2999:function(t,e,s){"use strict";var n=s("9065"),i=s.n(n);i.a},"2a41":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"interactive-container"},[t.showUpdate?[s("div",{staticClass:"update"},[s("img",{attrs:{src:t.updateimg,alt:""}}),s("p",[t._v(" 您目前使用的App版本低，请升级后体验")])])]:[s("div",{staticClass:"clearfix interactive-top"},[t._m(0),s("div",{attrs:{id:"lookNum"}},[t._v("观看人数"+t._s(t.commonparams.liveAudiences))])]),s("van-pull-refresh",{staticStyle:{padding:"1rem 0 2.4rem 0"},on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{finished:t.finished,offset:300,"finished-text":""},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("div",{staticClass:"commentList-box"},[s("ul",{attrs:{id:"commentList"}},t._l(t.list,(function(e,n){return s("li",{key:n,staticClass:"clearfix"},[s("div",{staticClass:"comment-left"},[s("img",{attrs:{src:e.userPic+"?imageView2/1/w/80/h/80"},on:{click:function(s){return t.toProfile(e)}}})]),s("div",{staticClass:"comment-right"},[s("div",{staticClass:"cr-box clearfix"},[s("div",{staticClass:"cr-left"},[s("div",{staticClass:"crl-top"},[e.isTeacher?s("i",[t._v("教师")]):t._e(),s("span",[t._v(t._s(e.userName))])]),s("div",{staticClass:"crl-mid"},[t._v(t._s(e.content))])]),s("div",{staticClass:"cr-right"},[1==e.likeState?[s("i",{staticClass:"icon-heart active",on:{click:function(s){return t.likeState(e)}}}),s("span",{staticClass:"active"},[t._v(t._s(e.likeCount))])]:[s("i",{staticClass:"icon-heart",on:{click:function(s){return t.likeState(e)}}}),s("span",[t._v(t._s(e.likeCount))])]],2)]),s("div",{staticClass:"cr-bottom clearfix"},[e.senting?s("div",{staticClass:"crl-bottom"},[t._v("发送中...")]):t._e(),s("div",{staticClass:"crl-bottom"},[t._v(t._s(e.createTimeStr))]),t.curuserId==e.userId?s("div",{staticClass:"crl-delete",on:{click:function(s){return t.deleteComment(e)}}},[t._v("删除")]):t._e()])])])})),0)])])],1),t.nodatashow?s("div",{staticClass:"empty"},[s("img",{attrs:{src:t.nodataimg,alt:""}}),s("p",[t._v("还没人给老师留言，快来参加互动吧")])]):t._e(),s("div",{staticClass:"van-footer"},[s("div",{staticClass:"van-input-fill-x"},[s("van-field",{attrs:{rows:"1",autosize:"",type:"textarea",maxlength:"1000",placeholder:"写留言"},on:{input:t.input,onblur:t.onblur,onfocus:t.onfocus},model:{value:t.txt,callback:function(e){t.txt="string"===typeof e?e.trim():e},expression:"txt"}}),t.showedit?s("label",{staticClass:"van-input-label"},[s("i"),t._v("写留言")]):t._e()],1),s("input",{staticClass:"van-btn",class:{active:t.activebtn},attrs:{id:"sent-comment",type:"button",value:"发送"},on:{click:t.addComment}})])]],2)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"hot-title"},[s("span",[t._v("全部")]),s("i",{staticClass:"hot-icon"})])}],r=(s("5ab2"),s("6d57"),s("e10e"),s("419a"),s("e980")),a=s("ac9f"),o=s("4d5e"),c=s("08c1"),u=s("cf45"),d=s("365c");function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function l(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(Object(s),!0).forEach((function(e){Object(a["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var f={data:function(){return{list:[],txt:"",active:!1,nodataimg:s("1960"),updateimg:s("e2fd"),teacherimg:s("4fd6"),dadimg:s("5c95"),momimg:s("303c"),refreshing:!1,loading:!1,error:!1,finished:!1,nodatashow:!1,showedit:!0,activebtn:!1,flag:!1,commonparams:{},realuserType:"",pageNo:1,pageSize:20,userInfo:{},curuserId:"",showUpdate:!1}},created:function(){},mounted:function(){document.title="掌通公开课"},computed:{},methods:l({},Object(c["b"])({getUserInfo:"User/getUserInfo"}),{changeStyle:function(t){t?(this.showedit=!1,this.activebtn=!0):(this.showedit=!0,this.activebtn=!1)},onblur:function(t){this.changeStyle(t)},onfocus:function(t){this.changeStyle(t)},input:function(t){this.changeStyle(t)},dealImg:function(t){var e;return e=t.avatar?t.avatar:"parent"===o["c"]?"male"===t.userSex?this.dadimg:this.momimg:this.teacherimg,e},dealUserType:function(t){var e="teacher";e&&("parent"===e?t.user_type&&(this.realuserType=t.user_type):"2"===t.user_type?this.realuserType=5:"3"===t.user_type&&(this.realuserType=4))},initData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={pageNo:this.pageNo,pageSize:this.pageSize,liveId:this.commonparams.liveId,userId:this.userInfo?this.userInfo.uid:"",userType:this.realuserType,viewType:1,studentId:this.userInfo?this.userInfo.student_uid:"",babyId:this.userInfo?this.userInfo.uid:""},t.prev=1,t.next=4,d["c"].getCommentList(e);case 4:s=t.sent,setTimeout((function(){s.list.length>0?(n.list=n.list.concat(s.list),n.pageNo++):0===s.list.length&&(n.nodatashow=!0,n.finished=!0),(s.totalPages<n.pageNo||s.list.length<20)&&(n.finished=!0),n.loading=!1}),500),t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](1),this.nodatashow=!0,this.refreshing=!1,this.finished=!0;case 13:case"end":return t.stop()}}),t,this,[[1,8]])})));function e(){return t.apply(this,arguments)}return e}(),onLoad:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.nodatashow=!1,this.loading=!0,this.flag){t.next=13;break}return t.next=5,this.getUserInfo();case 5:return this.userInfo=t.sent,this.curuserId=this.userInfo?this.userInfo.uid:"",this.dealUserType(this.userInfo),t.next=10,d["c"].getCommentPageParam({liveId:u["a"].getUrl("liveId"),appType:u["a"].getUrl("appType")});case 10:e=t.sent,this.commonparams=e,this.flag=!0;case 13:if(!o["c"]){t.next=20;break}if(1*u["a"].vCompare(this.userInfo.st.app_ver,"6.24.0")!==-1||1*u["a"].getUrl("screenType")!==2){t.next=17;break}return this.showUpdate=!0,t.abrupt("return");case 17:this.initData(),t.next=24;break;case 20:if("2"!==u["a"].getUrl("screenType")){t.next=23;break}return this.showUpdate=!0,t.abrupt("return");case 23:this.initData();case 24:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),prepend:function(t,e){return[e].concat(t)},toProfile:function(t){o["c"]&&("parent"===o["c"]?t.isTeacher?Object(o["b"])("jumpTo",{action:"teacherInfo",data:{id:t.userId,userId:this.userInfo?this.userInfo.uid:"",schoolId:this.userInfo?this.userInfo.school_id:"",userType:"teacher"}}):Object(o["b"])("jumpTo",{action:"userprofile",data:{id:t.userId,babyId:this.userInfo?this.userInfo.baby_uid:"",studentId:this.userInfo?this.userInfo.student_uid:""}}):Object(o["b"])("jumpTo",{action:"homepage",data:{userId:t.userId,roleType:this.realuserType,babyuid:"",babyId:this.userInfo?this.userInfo.baby_uid:"",parentLabel:"",wxName:""}}))},deleteComment:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var s,n,i,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.userInfo?(s=this.userInfo.baby_uid?this.userInfo.baby_uid:"",n=this.userInfo.student_uid?this.userInfo.student_uid:""):(s="",n=""),i={childId:s,studentId:n,id:e.commentId,contentId:this.commonparams.liveId,contentType:80,userId:this.userInfo?this.userInfo.uid:"",parent_comment_id:0},r=["确定","取消"],!o["c"]){t.next=16;break}return t.next=6,Object(o["b"])("jumpTo",{action:"ShowAlert",data:{title:"",message:"确定删除此留言？",actionTitles:r}});case 6:if(a=t.sent,a!==r[0]){t.next=16;break}return t.prev=8,t.next=11,d["c"].deleteComment(i);case 11:this.onRefresh(),t.next=16;break;case 14:t.prev=14,t.t0=t["catch"](8);case 16:case"end":return t.stop()}}),t,this,[[8,14]])})));function e(e){return t.apply(this,arguments)}return e}(),likeState:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.userInfo?(s=this.userInfo.baby_uid?this.userInfo.baby_uid:"",n=this.userInfo.student_uid?this.userInfo.student_uid:""):(s="",n=""),this.list.map((function(t,s){return t===e&&(1===+t.likeState?t.likeCount--:t.likeCount++,t.likeState=!t.likeState),e})),i={like:+e.likeState,contentId:this.commonparams.liveId,commentId:e.commentId,userPic:e.userPic,userName:this.userInfo?this.userInfo.nickname:"",userType:this.realuserType,childId:s,studentId:n,contentUserId:this.commonparams.createUserId,contentUserType:this.commonparams.createUserType,contentType:80,userId:this.userInfo?this.userInfo.uid:""},0===+e.likeState&&Object(o["d"])(2,{event_id:"click_openclass_like",obj_id:e.liveId,parm:"parent"===o["c"]?"1":"2"}),t.prev=4,t.next=7,d["c"].likeState(i);case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](4);case 11:case"end":return t.stop()}}),t,this,[[4,9]])})));function e(e){return t.apply(this,arguments)}return e}(),addComment:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,s,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.txt){t.next=3;break}return Object(o["b"])("jumpTo",{action:"toast",data:{message:"请输入输入留言!"}}),t.abrupt("return");case 3:return this.userInfo?(e=this.userInfo.baby_uid?this.userInfo.baby_uid:"",s=this.userInfo.student_uid?this.userInfo.student_uid:""):(e="",s=""),n={userId:this.userInfo?this.userInfo.uid:"",userType:this.realuserType,userName:this.userInfo?this.userInfo.nickname:"",userPic:this.dealImg(this.userInfo),contentUserId:this.commonparams.createUserId,contentUserType:this.commonparams.createUserType,contentType:80,contentId:this.commonparams.liveId,content:this.txt,childId:e,studentId:s,commentId:0,classId:this.userInfo?this.userInfo.class_uid:"",schoolId:this.userInfo?this.userInfo.school_id:""},i={userId:this.userInfo?this.userInfo.uid:"",userType:this.realuserType,userName:this.userInfo?this.userInfo.nickname:"",userPic:this.dealImg(this.userInfo),contentId:this.commonparams.liveId,content:this.txt,childid:e,studentid:s,commentId:0,senting:!0},this.txt&&(this.list=this.prepend(this.list,i),this.txt="",this.showedit=!0,this.activebtn=!1),this.list.length>0&&(this.nodatashow=!1),u["a"].scrollToPosition(0,0),t.prev=9,t.next=12,d["c"].addComment(n);case 12:this.onRefresh(),t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](9),console.log(t.t0);case 18:case"end":return t.stop()}}),t,this,[[9,15]])})));function e(){return t.apply(this,arguments)}return e}(),onRefresh:function(){var t=this;setTimeout((function(){t.finished=!1,t.refreshing=!1,t.list=[],t.pageNo=1,t.onLoad()}),500)}})},p=f,m=(s("2999"),s("f6c4"),s("980f"),s("623f")),I=Object(m["a"])(p,n,i,!1,null,"44e6e478",null);e["default"]=I.exports},"303c":function(t,e,s){t.exports=s.p+"static/img/Mom.1c07c90b.png"},"4fd6":function(t,e,s){t.exports=s.p+"static/img/teacher.c55542a7.png"},"5c95":function(t,e,s){t.exports=s.p+"static/img/Dad.83eb0b34.png"},"5dde":function(t,e,s){},9065:function(t,e,s){},"980f":function(t,e,s){"use strict";var n=s("5dde"),i=s.n(n);i.a},c732:function(t,e,s){},e2fd:function(t,e,s){t.exports=s.p+"static/img/update_img.29f39c88.png"},f6c4:function(t,e,s){"use strict";var n=s("c732"),i=s.n(n);i.a}}]);