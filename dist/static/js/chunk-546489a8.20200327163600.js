(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-546489a8"],{"0b65":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zx-container",attrs:{id:"editorContainer"}})},r=[],o=n("21c3"),s=n.n(o),a=n("4d5e"),h={data:function(){return{editor:""}},mounted:function(){this.initZxEditor(),this.initZxEditorContent(),document.title="编辑图文简介"},methods:{initZxEditor:function(){var t=this;this.editor=new s.a("#editorContainer",{editable:!0,placeholder:"请输入...",cursorColor:"#333",fixed:!1,customPictureHandler:!0,toolbarBtns:["select-pic","text-style"]}),this.editor.toolbar.addButton({name:"select-pic",className:"toolbar-icon-pic",events:{type:"click",handler:function(){console.log("handler"),Object(a["b"])("selectMedia",{type:2,isShowCamera:!0,maxMediaNumber:50,isCut:!1,selectedPicLocalUrl:[]}).then((function(e){e="string"===typeof e?JSON.parse(e):e;for(var n=0;n<e.photo.length;n++)t.uploadVideo(e.photo[n])}))}}})},uploadVideo:function(t){var e=this;Object(a["b"])("uploadMedia",{photo:[{photoFilePath:t.photoFilePath,width:t.width,height:t.height}],interruptMode:1,cellNetMode:1,compressMode:1,slicesMode:8,compressId:"",businessId:"10008"}),Object(a["a"])("uploadSuccess",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var n=0;n<t.fileUrls.length;n++){var i=t.fileUrls[n].url,r=new Image;r.src=i,e.editor.insertElm(r)}})),Object(a["a"])("uploadFail",(function(t){Object(a["b"])("jumpTo",{action:"toast",data:{message:"上传失败"}})}))},finishBtn:function(){var t=this;Object(a["b"])("jumpTo",{action:"topbar",data:{right_txt:"完成",clickAction:"js",js:a["c"]+".openShare"}}),Object(a["a"])("openShare",(function(){var e;e=t.editor.getHtml(),Object(a["b"])("jumpTo",{action:"openClassPhotoTextEdit",data:{content:e}})}))},goBackBtn:function(t){var e=this;Object(a["b"])("jumpTo",{action:"topBack",data:{leftText:"返回",clickAction:a["c"]+".goBack",js:a["c"]+".goBack"}}),Object(a["a"])("goBack",(function(){var n=["放弃编辑","继续编辑"];t+""!==e.editor.getHtml()?Object(a["b"])("jumpTo",{action:"ShowAlert",data:{title:"",message:"放弃图文编辑吗？",actionTitles:n}}).then((function(e){e===n[0]&&Object(a["b"])("jumpTo",{action:"finish",data:{needRefrush:!1,param:t}})})):Object(a["b"])("jumpTo",{action:"finish",data:{needRefrush:!1,param:t}})}))},initZxEditorContent:function(){var t=this;Object(a["b"])("dataToH5",{}).then((function(e){t.editor.setHtml(e),t.goBackBtn(e),t.finishBtn()}))}}},c=h,l=(n("9ba0"),n("623f")),d=Object(l["a"])(c,i,r,!1,null,null,null);e["default"]=d.exports},"1db7":function(t,e,n){},"21c3":function(t,e,n){
/*!
 * zx-editor v3.0.2
 * https://github.com/capricorncd/zx-editor
 * Copyright © 2018-present, capricorncd
 * Released under the MIT License
 * Released on: 2019-06-21 23:06:39
 */
!function(e,n){t.exports=n()}(0,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var e="undefined"==typeof document?{body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},location:{hash:""}}:document,n="undefined"==typeof window?{document:e,navigator:{userAgent:""},location:{},history:{},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){}}:window;function i(t){for(var e=[],n=0;n<t.length;n+=1)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function r(t,n){var i=t.nodeName.toLowerCase();if("string"!=typeof n||0===m.strip(n).length)throw new TypeError("changeNodeName(oldNode, tagName) 'tagName' is ".concat(n,", should be a 'string'"));if(i===n.toLowerCase())return t;var r=e.createElement(n);if(1!==t.nodeType)r.appendChild(t);else{t.className&&(r.className=t.className),t.id&&(r.id=t.id);var o=t.getAttribute("style");o&&r.setAttribute("style",o),r.innerHTML=t.innerHTML}return t.parentNode&&t.parentNode.replaceChild(r,t),r}function o(t){return e.createTextNode(t)}function s(n,i){if(!n&&"string"!=typeof n)throw new TypeError("Parameter error");var r=e.createElement(n);if(i&&"object"===t(i))for(var o in i)i.hasOwnProperty(o)&&r.setAttribute(o,i[o]);return r}function a(t){if(!t)return null;if("string"==typeof t)return o(t);var e=t.tag,n=t.attrs,i=t.child;if(!e&&!n&&!i)return null;var r,h=s(e||"div",n);return Array.isArray(i)&&i.length?i.forEach((function(t){(r=a(t))&&h.appendChild(r)})):i&&"string"==typeof i&&h.appendChild(o(i)),h}var h=[],c=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,l=n.navigator.userAgent,d=n.navigator.platform;function u(t){var e=parseInt(t);return isNaN(e)?0:e}function f(t){return t?t.toString().replace(c,""):""}function p(t){return f(t).replace(/\s+/g," ")}function g(e,n){var i=e&&"object"===t(e);return n?i&&"[object Object]"===e.toString():i}function v(t){var e=("number"==typeof t?t:u(t)).toString(16);return e[1]?e:"0"+e}var m={isIPhone:/iphone/i.test(l)&&/iphone/.test(d),isIPhoneX:812===n.screen.height&&375===n.screen.width,supportBoxModel:function(){var t=e.getElementsByTagName("body")[0],n=e.createElement("div");t.appendChild(n),n.innerHTML="",n.style.width=n.style.paddingLeft="1px";var i=2===n.offsetWidth;return t.removeChild(n),i}(),changeNodeName:r,int:u,isElement:function(t){return g(t)&&t.nodeType},isObject:g,isWindow:function(t){return null!==t&&t===t.window},removeHtmlTags:function(t){return p(t=(t+"").replace(/<\/?.+?>/g,""))},rgbToHex:function(t){var e="";return/rgb.*?\((\d+)\D+?(\d+)\D+?(\d+)/.test(t)&&(e+=v(RegExp.$1),e+=v(RegExp.$2),e+=v(RegExp.$3)),e?"#"+e:t},slice:function(t,e){return h.slice.call(t,u(e))},strip:p,trim:f,toHump:function(t){return p(t).replace(/([-_\s]+\w)/g,(function(t,e){return e[1].toUpperCase()}))},unique:i};function y(t,i){var r,o=this;if(!t)return this;if(t instanceof y)return t;if("string"==typeof t)if("<"===t[0]&&">"===t[t.length-1]&&3<=t.length){var s=e.createElement("div");s.innerHTML=t,r=m.slice(s.childNodes)}else/^[#\w\d_,\s-]+$/.test(t)&&(i instanceof y&&(i=i[0]),i=m.isElement(i)&&1===i.nodeType?i:e,r=m.slice(i.querySelectorAll(m.strip(t))));else t.nodeType||t===n||t===e?r=[t]:Array.isArray(t)&&t.every((function(t){return m.isElement(t)}))&&(r=t);return r&&(r.forEach((function(t,e){o[e]=t})),this.length=r.length),this}y.prototype={constructor:y,length:0,children:function(t,e){"boolean"==typeof t&&(e=t,t=void 0);for(var n,r=[],o=0;o<this.length;o++)for(var s=this[o].childNodes,a=0;a<s.length;a++)n=s[a],t?1===n.nodeType&&b(n).is(t)&&r.push(n):(e||1===n.nodeType)&&r.push(n);return b(i(r))},closest:function(t){var e=this;return void 0===t?new b:(e.is(t)||(e=e.parents(t).eq(0)),e)},eq:function(t){var e=this.length,n=m.int(t)+(t<0?e:0);return b(this[n])},find:function(t){for(var e,n=[],i=0;i<this.length;i++)if(1===this[i].nodeType){e=this[i].querySelectorAll(t);for(var r=0;r<e.length;r++)n.push(e[r])}return b(n)},findParentFrom:function(t){t instanceof y&&(t=t[0]);var e,n=this[0];if(n===t)return null;for(;n.parentNode;){if((e=n.parentNode)===t)return b(n);n=e}return null},firstChild:function(){return this.children().eq(0)},lastChild:function(){return this.children().eq(-1)},next:function(t){if(0<this.length){if(t)return this[0].nextElementSibling&&b(this[0].nextElementSibling).is(t)?b([this[0].nextElementSibling]):b();if(this[0].nextElementSibling)return b([this[0].nextElementSibling])}return b()},parent:function(t){for(var e=[],n=0;n<this.length;n++)null!==this[n].parentNode&&(t?b(this[n].parentNode).is(t)&&e.push(this[n].parentNode):e.push(this[n].parentNode));return b(i(e))},parents:function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n].parentNode;r;)t?b(r).is(t)&&e.push(r):e.push(r),r=r.parentNode;return b(i(e))},addClass:function(t){var e=this;return t&&t.split(" ").forEach((function(t){for(var n=0;n<e.length;n++)e[n]&&e[n].classList&&e[n].classList.add(t)})),this},removeClass:function(t){var e=this;return t.split(" ").forEach((function(t){for(var n=0;n<e.length;n++)e[n]&&e[n].classList&&e[n].classList.remove(t)})),this},hasClass:function(t){return!!this[0]&&this[0].classList.contains(t)},attr:function(t,e){if(1===arguments.length&&"string"==typeof t)return this[0]?this[0].getAttribute(t):void 0;for(var n=0;n<this.length;n++)if(2===arguments.length)this[n].setAttribute(t,e);else for(var i in t)this[n][i]=t[i],this[n].setAttribute(i,t[i]);return this},removeAttr:function(t){for(var e=0;e<this.length;e++)this[e].removeAttribute(t);return this},data:function(t,e){var n;if(void 0!==e){for(var i=0;i<this.length;i++)(n=this[i]).dataStorage||(n.dataStorage={}),n.dataStorage[t]=e;return this}if(n=this[0]){if(n.dataStorage)return n.dataStorage[t];var r=n.getAttribute("data-".concat(t));return/^\d+\.?\d*$/.test(r)?+r:r}},append:function(){for(var t,n=0;n<arguments.length;n++){t=n<0||arguments.length<=n?void 0:arguments[n];for(var i=0;i<this.length;i++)if("string"==typeof t){var r=e.createElement("div");for(r.innerHTML=t;r.firstChild;)this[i].appendChild(r.firstChild)}else if(t instanceof y)for(var o=0;o<t.length;o++)this[i].appendChild(t[o]);else this[i].appendChild(t)}return this},appendTo:function(t){return b(t).append(this),this},insertAfter:function(t){for(var e=b(t),n=0;n<this.length;n++)if(1===e.length)e[0].parentNode.insertBefore(this[n],e[0].nextSibling);else if(1<e.length)for(var i=0;i<e.length;i++)e[i].parentNode.insertBefore(this[n].cloneNode(!0),e[i].nextSibling)},insertBefore:function(t){for(var e=b(t),n=0;n<this.length;n++)if(1===e.length)e[0].parentNode.insertBefore(this[n],e[0]);else if(1<e.length)for(var i=0;i<e.length;i++)e[i].parentNode.insertBefore(this[n].cloneNode(!0),e[i])},prepend:function(t){var n,i;for(n=0;n<this.length;n++)if("string"==typeof t){var r=e.createElement("div");for(r.innerHTML=t,i=r.childNodes.length-1;0<=i;i--)this[n].insertBefore(r.childNodes[i],this[n].childNodes[0])}else if(t instanceof y)for(i=0;i<t.length;i++)this[n].insertBefore(t[i],this[n].childNodes[0]);else this[n].insertBefore(t,this[n].childNodes[0]);return this},prependTo:function(t){return b(t).prepend(this),this},replace:function(t){for(var e,n=b(t),i=0;i<this.length;i++)(e=this[i].parentNode)&&e.replaceChild(n[0].cloneNode(!0),this[i]);return this},remove:function(t){var e;if("number"!=typeof t)for(var n=0;n<this.length;n++)(e=this[n]).parentNode&&e.parentNode.removeChild(e);else(e=this[t])&&e.parentNode&&e.parentNode.removeChild(e);return this},is:function(t){var i,r,o=this[0];if(!o||void 0===t)return!1;if("string"==typeof t){if(o.matches)return o.matches(t);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(o.msMatchesSelector)return o.msMatchesSelector(t);for(i=b(t),r=0;r<i.length;r++)if(i[r]===o)return!0;return!1}if(t===e)return o===e;if(t===n)return o===n;if(t.nodeType||t instanceof y){for(i=t.nodeType?[t]:t,r=0;r<i.length;r++)if(i[r]===o)return!0;return!1}return!1},isTextNode:function(){var t=this[0];return!(!t||!t.nodeType)&&3===t.nodeType},isEmpty:function(){return!m.strip(this.text())&&!this.find("img, video, audio")[0]},isFirstChildren:function(t){return this.children().eq(0).is(t)},isLastChildren:function(t){return this.children().eq(-1).is(t)},indexOf:function(t){t instanceof y&&(t=t[0]);for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1},every:function(t,e){if("function"!=typeof t)throw new TypeError("every(fn) fn is not a function");for(var n=this.length,i=2<=arguments.length?e:void 0,r=0;r<n;r++)if(t.call(i,b(this[r]),r))return!1;return!0},text:function(t){if(void 0===t)return this[0]?this[0].textContent.trim():"";for(var e=0;e<this.length;e++)this[e].textContent=t;return this},html:function(t){if(void 0===t)return this[0]?this[0].innerHTML:"";for(var e=0;e<this.length;e++)this[e].innerHTML=t;return this},nodeName:function(){return this[0]?this[0].nodeName.toLowerCase():null},nodeType:function(){return this[0]?this[0].nodeType:0},changeNodeName:function(t){for(var e=0;e<this.length;e++)this[e]=r(this[e],t);return this},hide:function(){for(var t=0;t<this.length;t++)this[t].style.display="none";return this},show:function(){for(var t=0;t<this.length;t++){var e=this[t];"none"===e.style.display&&(e.style.display=""),"none"===n.getComputedStyle(e,null).getPropertyValue("display")&&(e.style.display="block")}return this},on:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];for(var o,s,a,h,c,l=i[0],d=i[1],u=i[2],f=0;f<this.length;f++)1!==(o=this[f]).nodeType&&o!==e&&o!==n||(a=l,h=d,c=u,(s=o).addEventListener?s.addEventListener(a,h,c):s.attachEvent?s.attachEvent(a,h):s["on".concat(a)]=h);return this},off:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];for(var o,s,a,h,c,l=i[0],d=i[1],u=i[2],f=0;f<this.length;f++)1!==(o=this[f]).nodeType&&o!==e&&o!==n||(a=l,h=d,c=u,(s=o).removeEventListener?s.removeEventListener(a,h,c):s.detachEvent?s.detachEvent(a,h):s["on".concat(a)]=null);return this},trigger:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];for(var o=i[0].split(" "),s=i[1],a=0;a<o.length;a++)for(var h=o[a],c=0;c<this.length;c++){var l=this[c],d=void 0;try{d=new n.CustomEvent(h,{detail:s,bubbles:!0,cancelable:!0})}catch(t){(d=e.createEvent("Event")).initEvent(h,!0,!0),d.detail=s}l.dispatchEvent(d)}return this},css:function(t,e){var i;if(1===arguments.length){if("string"==typeof t)return this[0]?n.getComputedStyle(this[0],null).getPropertyValue(t):void 0;for(i=0;i<this.length;i+=1)for(var r in t)this[i].style[r]=t[r]}if(2===arguments.length&&"string"==typeof t)for(i=0;i<this.length;i+=1)this[i].style[t]=e;return this},styles:function(){return this[0]?n.getComputedStyle(this[0],null):{}},width:function(){return this[0]===n?n.innerWidth:0<this.length?parseFloat(this.css("width")):null},outerWidth:function(t){if(0<this.length){var e=this[0].offsetWidth;if(t){var n=this.styles();return e+parseFloat(n.getPropertyValue("margin-right"))+parseFloat(n.getPropertyValue("margin-left"))}return e}return null},height:function(){return this[0]===n?n.innerHeight:0<this.length?parseFloat(this.css("height")):null},outerHeight:function(t){if(0<this.length){var e=this[0].offsetHeight;if(t){var n=this.styles();return e+parseFloat(n.getPropertyValue("margin-top"))+parseFloat(n.getPropertyValue("margin-bottom"))}return e}return null},offset:function(){if(0<this.length){var t=this[0],i=t.getBoundingClientRect(),r=e.body,o=t.clientTop||r.clientTop||0,s=t.clientLeft||r.clientLeft||0,a=t===n?n.scrollY:t.scrollTop,h=t===n?n.scrollX:t.scrollLeft;return{top:i.top+a-o,left:i.left+h-s}}return null},each:function(t){if(!t)return this;for(var e=0;e<this.length;e++)if(!1===t.call(this[e],e,this[e]))return this;return this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return void 0===t?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}}};var b=function(t,e){return new y(t,e)};function w(t){this.$parent=t,this.selection=null,this.range=null,this.currentNode=null,this.timer=null;var e=t.lastChild();this.offset=e.text().length||0,e[0]&&this.setRange(e[0],this.offset)}function x(){}w.prototype={constructor:w,init:function(){this.selection=window.getSelection();try{this.range=this.selection.getRangeAt(0)}catch(l){this.range=new Range}},setRange:function(t,e){var n=this;if(t instanceof y&&(t=t[0]),null===this.selection?this.init():this.selection.removeAllRanges(),t=t||this.currentNode){var i=t.childNodes[t.childNodes.length-1]||t;/IMG|VIDEO|AUDIO/.test(i.nodeName)?(this.offset=1,i=i.parentNode):this.offset=void 0===e?Math.min(b(i).text().length,this.offset):e,this.range.setStart(i,this.offset),this.currentNode=t}this.range.collapse(!0),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){n.selection.addRange(n.range)}),100)},getCurrentNode:function(t){try{this.range=this.selection.getRangeAt(0)}catch(t){this.range=new Range}this.currentNode=this.range.endContainer,this.offset=this.range.startOffset;var e=b(this.currentNode).findParentFrom(this.$parent)||this.$parent.lastChild();return t?e[0]:e}};var C={head:null,className:"",headHeight:44,headLeftBtnClassName:"",headLeftBtnText:"",headTitle:"Expansion Panel",height:260,body:null,name:"expansion-panel",onHeadClick:x,onBodyClick:x,onBeforeShow:x,onShow:x,onBeforeHide:x,onHide:x};function N(t,e){var n=this;if(!e instanceof W)throw new TypeError("new ExpansionPanel() parameter error, arguments[1] is not a ZxEditor instance.");var i=this.options=Object.assign({},C,t);if((this.editorInstance=e).expansionPanels.push(this),this.visible=!1,this.name=i.name,this.$body=b('<div class="body-wrapper" style="height:'.concat(i.height-i.headHeight,'px;"></div>')),this.$el=b('<div class="zx-editor-expansion-panel border-top"></div>'),e.$eventHandlers[this.name]={$target:this.$el,type:"click",handler:function(t){t.stopPropagation()}},this.$el.on("click",e.$eventHandlers[this.name].handler),0<i.headHeight){if(i.head)this.$head=b(i.head);else{this.$head=b('<div class="head-wrapper border-bottom '.concat(i.headAlign,'" style="height:').concat(i.headHeight,"px;line-height:").concat(i.headHeight,'px;"><div class="l cur ').concat(i.headLeftBtnClassName,'">').concat(i.headLeftBtnText,"</div>").concat(i.headTitle||"","</div>"));var r=this.$head.find(".l");e.$eventHandlers[this.name+"HeadLeftBtn"]={$target:r,type:"click",handler:function(t){i.onHeadClick.call(n,t,"left-button")}},r.on("click",e.$eventHandlers[this.name+"HeadLeftBtn"].handler);var o=b('<i class="switch" style="width:'.concat(i.headHeight,"px;height:").concat(i.headHeight,'px;"></i>'));this.$head.append(o),e.$eventHandlers[this.name+"HeadSwitch"]={$target:o,type:"click",handler:function(t){i.onHeadClick.call(n,t,"switch"),n.hide()}},o.on("click",e.$eventHandlers[this.name+"HeadSwitch"].handler)}this.$el.append(this.$head),this.$head.on("click",(function(t){i.onHeadClick.call(n,t)}))}try{this.$body.append(b(i.body))}catch(t){throw t}this.$body.on("click",(function(t){i.onBodyClick.call(n,t)})),this.$el.append(this.$body),e.$editor.append(this.$el),this.init(this.options)}function $(t){if(this.$cursorNode.nodeName()!==t){var n=this.$cursorNode[0],i=n.childNodes,r=i.length;if("ul"===t){var o=e.createElement("ul");H(o,n);for(var s=0;s<r;s++)o.appendChild(E(i[s].cloneNode(!0)));return n.parentNode.replaceChild(o,n),void(this.$cursorNode=b(o))}if("UL"===n.nodeName){for(var a,h,c=0;c<r;c++)H(a=i[c].cloneNode(!0),n),h=this.changeNodeName(a,t),b(h).insertBefore(this.$cursorNode);return this.$cursorNode.remove(),void(this.$cursorNode=b(h))}this.$cursorNode.changeNodeName(t),this.cursor.setRange(this.$cursorNode)}}function E(t){var n=e.createElement("li");return n.appendChild(t),n}function H(t,e){var n,i,r;n=e.getAttribute("style"),i=e.id,r=e.className,n&&t.setAttribute("style",n),i&&(t.id=i),r&&(t.className=r)}N.prototype={constructor:N,init:function(t){t=t||this.options;var e=window.innerHeight;this.$el.css({height:"".concat(t.height,"px"),top:e+"px"})},show:function(){this.visible||(this.options.onBeforeShow.call(this),this.$el.removeClass("out").addClass("in"),this.visible=!0,this.editorInstance.emit("expansionPanelShow",this,this.editorInstance),this.options.onShow.call(this))},hide:function(){this.visible&&(this.options.onBeforeHide.call(this),this.$el.removeClass("in").addClass("out"),this.visible=!1,this.editorInstance.emit("expansionPanelHide",this,this.editorInstance),this.options.onHide.call(this))}};var T=34,S=["#333","#d0d0d0","#ff583d","#fdaa25","#44c67b","#14b2e0","#b065e2"];function B(){this.toolbar.addButton(function(t){var e=this,n=this,i=[];i.push({tag:"dl",attrs:{class:"__style-wrapper border-bottom"},child:[{tag:"dd",attrs:{style:"font-weight: 800;","data-style":"fontWeight:800"},child:["B"]},{tag:"dd",attrs:{style:"font-style: italic;","data-style":"fontStyle:italic"},child:["I"]},{tag:"dd",attrs:{style:"text-decoration: line-through;","data-style":"textDecoration:line-through"},child:["abc"]},{tag:"dd",attrs:{style:"","data-style":"textAlign:left",class:"text-align--l"}},{tag:"dd",attrs:{style:"","data-style":"textAlign:center",class:"text-align--c"}},{tag:"dd",attrs:{style:"","data-style":"textAlign:right",class:"text-align--r"}}]});var r=Array.isArray(t.textStyleColors)?t.textStyleColors:S;if(r.length){var o={tag:"dl",attrs:{class:"__color-wrapper border-bottom"},child:function(t){var e=[];return t.forEach((function(t,n){/^#\w{3,6}$/.test(t)&&e.push({tag:"dd",attrs:{class:0===n?"active":"","data-color":function(t){return 7===t.length?t:"#".concat(t[1]).concat(t[1]).concat(t[2]).concat(t[2]).concat(t[3]).concat(t[3])}(t.toLowerCase())},child:[{tag:"i",attrs:{style:"background:".concat(t)}}]})})),e}(r)};i.push(o)}i.push({tag:"dl",attrs:{class:"__tag-wrapper"},child:[{tag:"dd",attrs:{class:"__h2","data-tag":"h2"},child:["大标题",{tag:"i"}]},{tag:"dd",attrs:{class:"__h4","data-tag":"h4"},child:["小标题",{tag:"i"}]},{tag:"dd",attrs:{class:"__section active","data-tag":"section"},child:["正文",{tag:"i"}]},{tag:"dd",attrs:{class:"__blockquote","data-tag":"blockquote"},child:["引用",{tag:"i"}]},{tag:"dd",attrs:{class:"__ul","data-tag":"ul"},child:["无序列表",{tag:"i"}]}]});var s=a({tag:"div",attrs:{class:"text-style-outer-wrapper"},child:i}),h=b(s);this.textStylePanel=new this.ExpansionPanel({headLeftBtnText:t.textStyleHeadLeftBtnText,headTitle:t.textStyleTitle,headAlign:t.textStyleHeadAlign,body:h,onHeadClick:function(t){if("left-button"===t){var e=n.$cursorNode[0];e.className="",e.setAttribute("style",""),"SECTION"!==e.nodeName&&(n.$cursorNode=b(n.changeNodeName(e,"section"))),p(r[0]),f("section"),n.cursor.setRange(n.$cursorNode)}}},this),h.find(".__style-wrapper").children().on("click",(function(){var t=b(this).data("style").split(":"),e=t[0],i=n.$cursorNode[0];i.style[e]=i.style[e]===t[1]?"":t[1],n.cursor.setRange()}));var c=h.find(".__color-wrapper"),l=c.children();l.on("click",(function(){for(var t,e=0;e<l.length;e++)(t=b(l[e]))[0]!==this||t.hasClass("active")?t.hasClass("active")&&t.removeClass("active"):(t.addClass("active"),n.$cursorNode.css("color",t.data("color")));n.cursor.setRange()}));var d=h.find(".__tag-wrapper"),u=d.children();function f(t){var e=d.find(".active");e.data("tag")!==t&&(e.removeClass("active"),d.find(".__".concat(t)).addClass("active"))}function p(t){var e=c.find(".active");if(e.data("color")!==t){var n;e.removeClass("active");for(var i=0;i<l.length;i++)if((n=b(l[i])).data("color")===t){n.addClass("active");break}}}return u.on("click",(function(){if(!b(this).hasClass("active"))for(var t,e=b(this).data("tag"),i=0;i<u.length;i++)(t=b(u[i]))[0]===this?(t.addClass("active"),$.call(n,e)):t.hasClass("active")&&t.removeClass("active")})),this.isIPhoneX&&d.css("margin-bottom",T+"px"),this.textStylePanel.resetActiveState=function(){var t=e.cursor.getCurrentNode();f(t.nodeName()),p(e.rgbToHex(t.css("color")))},{name:"text-style",className:"text-style-btn",events:{type:"click",handler:function(){e.textStylePanel.show()}}}}.call(this,this.options))}function k(){var t=this,e=this.options,n=b('<label class="toolbar-icon-pic" style="position:absolute;top:0;left:0;width:100%;height:100%;"></label>'),i=b('<input type="file" accept="image/*" style="display:none">');n.append(i);var r=i[0];this.$eventHandlers.selectPictureInputClick={$target:i,type:"click",handler:function(){r.value=""},capture:!1};var o=/^<\w+\b.*<\/\w+>$/.test(e.imageSectionTemp)?e.imageSectionTemp:'<section><img src="{url}"></section>',s=Object.assign({},t.options,{width:e.imageMaxWidth});this.$eventHandlers.selectPictureInputChange={$target:i,type:"change",handler:function(n){var i=r.files[0];t.emit("selectPictureInputChange",i,n,t),e.customPictureHandler||t.fileToBase64(i,s).then((function(e){var n=b(o.replace("{url}",e.base64));n.find("img").attr({id:"zxEditor_img_"+ +new Date,alt:i.name}),t.insertElm(n)})).catch((function(e){t.emit("error",e,"fileToBase64")}))},capture:!1},this.toolbar.addButton({name:"select-picture",el:n})}var A={name:"",className:"",el:null,innerHtml:"",style:"",events:null};function P(t,e){this.editorInstance=e,this.options=t,this.visible=t.toolbarBeenFixed,this.height=t.toolbarHeight,this.$el=b('<div class="zx-editor-toolbar-wrapper border-top '.concat(this.visible?"in":"out",'" style="height:').concat(this.height+(m.isIPhoneX?T:0),'px;"><dl class="inner-wrapper" style="height:').concat(this.height,'px;"></dl></div>')),e.$editor.append(this.$el),this.init(t)}function I(t){return new Promise((function(e){var n=t.clipboardData,i="";if(n){var r=n.items;r&&0<r.length?function(){var t,e,n=r.length;for(t=0;t<n;t++)e=r[t],/^text\/plain/.test(e.type)?e.getAsString((function(t){i+=t,o(0,n)})):o(0,n)}():e("")}else e("");function o(t,n){++t===n&&e(m.strip(i))}}))}function L(t,e){t&&"string"==typeof t&&e&&"function"==typeof e&&(this.customEvents[t]||(this.customEvents[t]=[]),this.customEvents[t].push(e))}function O(t){var e=this.customEvents[t];if(e)for(var n=Array.prototype.slice.call(arguments,1),i=0;i<e.length;i++)try{e[i].apply(null,n)}catch(t){this.emit("error",t,"emit")}}function _(t,e){if(this.customEvents[t])if("function"==typeof e&&this.customEvents[t]){var n=this.customEvents[t].findIndex((function(t){return t===e}));0<=n&&this.customEvents[t].splice(n,1)}else this.customEvents[t]=null,delete this.customEvents[t]}function j(t,n,i,r){var o=e.createElement("img");o.src=t,o.setAttribute("alt",n.name),o.onload=function(){var s={element:o,base64:t,width:o.naturalWidth||o.width,height:o.naturalHeight||o.height,type:n.type,size:n.size,name:n.name,file:n};r(null,1<i.orientation?function(t,n){var i=e.createElement("canvas"),r=i.getContext("2d"),o=t.element,s=t.width,a=t.height;switch(i.width=s,i.height=a,n){case 6:i.width=a,i.height=s,r.rotate(Math.PI/2),r.drawImage(o,0,-a,s,a);break;case 3:r.rotate(Math.PI),r.drawImage(o,-s,-a,s,a);break;case 8:i.width=a,i.height=s,r.rotate(3*Math.PI/2),r.drawImage(o,-s,0,s,a);break;default:r.drawImage(o,0,0,s,a)}var h=i.toDataURL(t.type);return o.src=h,Object.assign(t,{element:i,base64:h,width:i.width,height:i.height})}(s,i.orientation):s)},o.onerror=r}function M(t,n){var i=e.createElement("canvas");return i.width=n.cw,i.height=n.ch,i.getContext("2d").drawImage(t,n.sx,n.sy,n.sw,n.sh,0,0,i.width,i.height),i}function R(t,e){return parseInt(t/e*1e4)/1e4}var z={width:0,heigth:0,imageMaxSize:null,ignoreGif:!0,forceResize:!(P.prototype={constructor:P,init:function(t){t=t||this.options;var e=n.innerHeight;this.$el.css({top:e+"px"}),this.visible&&this.editorInstance.emit("toolbarShow",this,this.editorInstance)},show:function(){this.visible||(this.$el.removeClass("out").addClass("in"),this.visible=!0,this.editorInstance.emit("toolbarShow",this,this.editorInstance))},hide:function(){this.visible&&(this.$el.removeClass("in").addClass("out"),this.visible=!1,this.editorInstance.emit("toolbarHide",this,this.editorInstance))},addButton:function(e,n){var i=this,r=Object.assign({},A,e);r.name||(r.name="toolbar-btn-"+ +new Date);var o=b('<dd class="icon-item" data-name="'.concat(r.name,'" style="').concat(r.style,'"></dd>'));r.el&&"object"===t(r.el)?o.append(b(r.el)):o.html(r.innerHtml),r.className&&o.addClass(r.className);var s={};this.options.toolbarHeight&&(s.width=s.height=this.options.toolbarHeight+"px"),o.css(s);var a=this.$el.find(".inner-wrapper").children();if("number"==typeof n&&n<a.length?o.insertBefore(a[n]):this.$el.find(".inner-wrapper").append(o),r.events){var h,c;m.isObject(r.events)?(h=[]).push(r.events):Array.isArray(r.events)&&(h=r.events);var l=this.editorInstance.$eventHandlers;h.forEach((function(t){if(!t||"string"!=typeof t.type||"function"!=typeof t.handler)throw new TypeError("Function addButton(opts), opts.events's parameter error.");c="toolbarBtnEvent_".concat(t.name),l[c]={$target:o,type:t.type,handler:t.handler.bind(i.editorInstance),capture:"boolean"==typeof t.capture&&t.capture},o.on(t.type,l[c].handler,l[c].capture)}))}}})};function F(t){var e,i;if(!/^data:(\w+\/\w+);base64,(.+)/.test(t))throw new TypeError("base64ToBlobData(base64Data), base64Data non-base64 data!");e=RegExp.$1,i=RegExp.$2;for(var r=n.atob(i),o=new Uint8Array(r.length),s=0;s<r.length;s++)o[s]=r.charCodeAt(s);return new Blob([o],{type:e})}function D(t,e){return new Promise((function(i,r){if(!t||!t instanceof File)throw new TypeError("file is not a File object");var o=Object.assign({},z,e);/image\/.*/i.test(t.type)?void 0===n.EXIF?(o.orientation=0,q(t,o).then(i).catch(r)):n.EXIF.getData(t,(function(){var e=n.EXIF.getAllTags(this)||{};o.orientation=e.Orientation,q(t,o).then(i).catch(r)})):r(new TypeError('"'.concat(t.name,'" is not Image File!')))}))}function U(t){return n.URL.createObjectURL(t)}function q(t,e){return new Promise((function(n,i){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){j(this.result,t,e,(function(r,o){if(r)i(r);else{if("image/gif"===t.type&&e.ignoreGif)return o.data=t,o.url=U(t),o.raw=o,void n(o);var s=function(t,e){var n=t.type||t.file.type,i=function(t,e,n){var i=m.int(n.width),r=m.int(n.height);if(!n.forceImageResize&&0<i&&t<i&&0<r&&e<r)return{sx:0,sy:0,sw:t,sh:e,scaling:1,cw:t,ch:e};var o=1,s=0,a=0,h=t,c=e,l=0,d=0;return 0<i&&0<r?(c=r,l=h=i,d=Math.floor(i*e/t),o=R(t,i),a=r<=d?(s=0,m.int((d-r)/2*o)):(o=R(e,r),l=Math.floor(r*t/e),d=r,s=m.int((l-i)/2*o),0)):0<i?(o=R(t,i),h=i,c=Math.floor(i*e/t)):0<r&&(o=R(e,r),h=Math.floor(r*t/e),c=r),{sx:s,sy:a,sw:m.int(h*o),sh:m.int(c*o),scaling:o,cw:h,ch:c}}(t.width,t.height,e),r=t.element,o=2,s=i.sw,a=i.sh,h=i.sx,c=i.sy;if(i.scaling>o)for(o=i.scaling;2<o;)r=M(r,{cw:i.cw*o,ch:i.ch*o,sx:h,sy:c,sw:s,sh:a}),s=r.width,a=r.height,h=c=0,o-=1;var l=(r=M(r,{cw:i.cw,ch:i.ch,sx:h,sy:c,sw:s,sh:a})).toDataURL(n),d=F(l);return{element:r,type:n,width:i.cw,height:i.ch,data:d,base64:l,size:d.size,url:U(d),raw:t}}(o,e);0<e.imageMaxSize&&s.size/1024>e.imageMaxSize?i(new RangeError('File size "'.concat(s.size/1024,'" out of range, limit is ').concat(e.imageMaxSize,"Kib"))):n(s)}}))},r.onerror=i}))}var V={editable:!0,fixed:!1,placeholder:"Enter...",placeholderColor:"",lineHeight:1.5,paragraphTailSpacing:"",cursorColor:"",textColor:"",cursorOffsetTop:30,customPasteHandler:!1,toolbarBeenFixed:!0,toolbarHeight:50,toolbarBtns:["select-picture","text-style"],customPictureHandler:!1,imageMaxWidth:720,imageMaxSize:20480,imageSectionTemp:'<section class="child-is-picture"><img src="{url}"></section>',ignoreGif:!0,forceImageResize:!1,textStyleColors:null,textStyleTitle:"Set Style",textStyleHeadLeftBtnText:"Clear style",textStyleHeadAlign:"center",mainColor:"",borderColor:""};function W(t,e){if(!this instanceof W)throw new Error("ZxEditor is a constructor and should be called with the `new` keyword");if(this.$wrapper=b(t),!this.$wrapper[0])throw new Error("Can't found '".concat(t,"' Node in document!"));this.version="3.0.2",this.$=b,this.ExpansionPanel=N,this.options=Object.assign(V,e),this.init(this.options)}return W.prototype={constructor:W,init:function(t){t=t||this.options,this.$eventHandlers={},this.customEvents={},function(t){for(var e in t.prototype.on=L,t.prototype.emit=O,t.prototype.off=_,t.prototype.getPasteText=I,m)m.hasOwnProperty(e)&&(t.prototype[e]=m[e]);t.prototype.blobToUrl=U,t.prototype.base64ToBlobData=F,t.prototype.fileToBase64=D,t.prototype.createElement=s,t.prototype.createVdom=a}(W),this.expansionPanels=[],function(t){var e=this;this.$content=b('<div class="zx-editor-content-wrapper is-empty" contenteditable="'.concat(t.editable,'"><section><br></section></div>')),this.setContentHeight(t),this.$editor=b('<div class="zx-editor"></div>'),this.$editor.append(this.$content),this.toolbar=new P(t,this),this.$wrapper.append(this.$editor),this.lineHeight=m.int(this.$content.styles().lineHeight),t.toolbarBtns.forEach((function(t){"select-picture"===t?e.plugin(k):"text-style"===t&&e.plugin(B)}))}.call(this,t),function(t){var e=".zx-editor .m-color{color:".concat(t.mainColor," !important;}.zx-editor .text-style-outer-wrapper .__tag-wrapper dd i {border-color:").concat(t.mainColor," !important;}");if(t.lineHeight||t.cursorColor||t.textColor){var n=t.lineHeight?"line-height:".concat(t.lineHeight,";"):"",i=t.cursorColor?"caret-color:".concat(t.cursorColor,";"):"",r=t.textColor?"color:".concat(t.textColor,";"):"";e+=".zx-editor .zx-editor-content-wrapper{".concat(n+i+r,"}")}if(t.paragraphTailSpacing&&(e+=".zx-editor .zx-editor-content-wrapper > *{margin-bottom:".concat(t.paragraphTailSpacing,";}")),t.placeholder||t.placeholderColor){var o=t.placeholder?"content:'".concat(t.placeholder,"';"):"",s=t.placeholderColor?"color:".concat(t.placeholderColor,";"):"";e+=".zx-editor .zx-editor-content-wrapper.is-empty:before{".concat(o+s,"}")}t.borderColor&&(e+=".zx-editor .border-top:before, .zx-editor .border-bottom:after {border-color: ".concat(t.borderColor)),b("head").append('<style type="text/css">'.concat(e,"</style>"))}.call(this,t),this.cursor=new w(this.$content),this.$cursorNode=this.cursor.getCurrentNode(),function(){var t,e=this.$content,i=b(n),r=this.options;function o(t){this.emit("click",t,this),this.$cursorNode=this.cursor.getCurrentNode(),this.checkPosition(),this.textStylePanel&&this.textStylePanel.visible&&this.textStylePanel.resetActiveState()}for(var s in this.$eventHandlers.windowResize={$target:i,type:"resize",handler:function(t){this.emit("windowResize",t,this),this.toolbar.init(),this.expansionPanels.forEach((function(t){t.init()}))}.bind(this)},this.$eventHandlers.contentPaste={$target:e,type:"paste",handler:function(t){var e=this;this.emit("paste",t,this),r.customPasteHandler||(t.preventDefault(),I(t).then((function(t){e.insertElm(m.removeHtmlTags(t))})))}.bind(this)},this.$eventHandlers.contentInput={$target:e,type:"input",handler:function(t){this.emit("input",t,this),this._checkEmpty(),this.checkPosition(),this.emit("change",t,this)}.bind(this)},this.$eventHandlers.contentFocus={$target:e,type:"focus",handler:function(t){this.emit("focus",t,this),this.options.toolbarBeenFixed||this.toolbar.show()}.bind(this)},this.$eventHandlers.contentBlur={$target:e,type:"blur",handler:function(t){this.emit("blur",t,this),this.$cursorNode=this.cursor.getCurrentNode(),this._checkChildSection(),this.options.toolbarBeenFixed||this.toolbar.hide()}.bind(this)},this.$eventHandlers.contentClick={$target:e,type:"click",handler:o.bind(this)},this.$eventHandlers.contentKeyup={$target:e,type:"keydown",handler:function(t){this.emit("keydown",t,this)}.bind(this)},this.$eventHandlers.contentKeyup={$target:e,type:"keyup",handler:function(t){this.emit("keyup",t,this),"Enter"!==t.key&&13!==t.keyCode||(this._checkChildSection(),o.call(this))}.bind(this)},this.$eventHandlers)(t=this.$eventHandlers[s]).$target.on(t.type,t.handler,t.capture)}.call(this)},insertElm:function(t){if(t){var e,n,i=this.$cursorNode;if("string"==typeof t)if(i.isEmpty())i.text(t),e=i,n=t.length;else if(i.children().every((function(t){return t.isTextNode()}))){var r=this.cursor.offset,o=i.text(),s=o.substr(0,r)+t+o.substr(r);i.text(s),e=i,n=t.length+r}else{var a=b("<section>".concat(t,"</section>"));a.insertAfter(i),e=a,n=t.length}else for(var h,c=b(t),l=0;l<c.length;l++){var d=(h=b(c[l])).nodeName();if("section"!==d&&(1!==h.nodeType()||/video|img|audio/.test(d)?h=b("<section></section>").append(h):h.changeNodeName("section")),i.isEmpty()?i.next()[0]&&i.next().isEmpty()?i.replace(h):h.insertBefore(i):h.insertAfter(i),h.next()[0])n=(e=h).isTextNode()?h.text().length:0;else{var u=b("<section><br></section>");this.$content.append(u),e=u,n=0}}this._checkChildSection(),this.$content.trigger("input"),console.log(e,n),this.cursor.setRange(e,n)}},insertBlankLine:function(){var t=b("<section><br></section>");this.insertElm(t),this.cursor.setRange(t,0)},_checkEmpty:function(){var t=this.$content;t.isEmpty()?t.addClass("is-empty"):t.hasClass("is-empty")&&t.removeClass("is-empty")},_checkChildSection:function(){this.$cursorNode||(this.$cursorNode=this.cursor.getCurrentNode());for(var t,e=this.$cursorNode[0],n=!1,i=this.$content[0],r=i.childNodes,o=0;o<r.length;o++)if(1===(t=r[o]).nodeType)/SECTION|H1|H2|H3|H4|BLOCKQUOTE|UL/.test(t.nodeName)||(n=t===e,t=m.changeNodeName(t,"section"),n&&(this.$cursorNode=b(t),this.cursor.setRange(t)));else{var s=b("<section></section>");s.append(t.cloneNode()),i.replaceChild(s[0],t),this.$cursorNode=s,this.cursor.setRange(s)}},remove:function(){this.setHtml()},setHtml:function(t){this.$content.html(t||"<section><br></section>"),this._checkChildSection(),this.cursor.setRange(this.$content.firstChild(),0),this.$content.trigger("input")},getHtml:function(){return this.$content.html()},getText:function(){return this.$content.text()},destroy:function(){var t;for(var e in this.$eventHandlers)(t=this.$eventHandlers[e]).$target.off(t.type,t.handler,t.capture),delete this.$eventHandlers[e];for(var n in this.customEvents)t=this.customEvents[n],this.off(n);for(var i in this.cursor=null,this.toolbar=null,this.textStylePanel=null,this)this[i]instanceof N&&(this[i]=null);this.$editor.remove()},setContentHeight:function(t){var e=window.innerHeight,n={marginBottom:e+"px"};t.height?n.height="number"==typeof t.height?t.height+"px":t.height:n.minHeight=(m.int(t.minHeight)||e)+"px",this.$content.css(n)},getBase64Images:function(){for(var t,e,n=[],i=this.$content.find("img"),r=0;r<i.length;r++)e=(t=i[r]).src,/^data:.+?;base64,/.test(e)&&n.push({id:t.id,base64:e,blob:F(e)});return n},setImageSrc:function(t,e){var n=this.$content.find("#"+t)[0];return!!n&&(n.src=e,n.removeAttribute("id"),!0)},plugin:function(t){"function"==typeof t&&t.call(this)},checkPosition:function(){var t,e=this.$cursorNode=this.cursor.getCurrentNode(),n=this.cursor.offset,i=e.text().length,r=e.height(),o=e.offset().top,s=0,a=i/(r/this.lineHeight),h=((r>this.lineHeight?Math.floor(n/a):1)-1)*this.lineHeight;this.options.fixed||(h>window.innerHeight/4&&(s=h),t=b(window).scrollTop(),b(window).scrollTop(t+o+s-this.options.cursorOffsetTop))}},W}))},"9ba0":function(t,e,n){"use strict";var i=n("1db7"),r=n.n(i);r.a}}]);